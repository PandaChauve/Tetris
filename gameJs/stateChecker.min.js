function StateChecker(a){this.defeatComponents=[];this.succesComponents=[];this.MakeComponents(a);this.defeatComponents.push(new PillarSizeChecker);this.lastDefeatCheck=this.lastSuccessCheck=!1}StateChecker.prototype.Defeat=function(){return this.lastDefeatCheck};StateChecker.prototype.Victory=function(){return this.lastSuccessCheck};
StateChecker.prototype.Check=function(a){this.lastSuccessCheck=0!==this.succesComponents.length;this.lastDefeatCheck=!1;for(var b=0;b<this.succesComponents.length;b+=1)this.lastSuccessCheck=this.succesComponents[b].Check(a)&&this.lastSuccessCheck;for(b=0;b<this.defeatComponents.length;b+=1)this.lastDefeatCheck=this.defeatComponents[b].Check(a)||this.lastDefeatCheck};
StateChecker.prototype.MakeComponents=function(a){$("#rules").html("<ul />");null===a||void 0===a?$("#rules ul").append($("<li class='succesCond'>Try to stay alive !</li>")):(void 0!==a.blocksLeft&&this.succesComponents.push(new BlockChecker(a.blocksLeft)),void 0!==a.score&&this.succesComponents.push(new ScoreChecker(a.score)),void 0!==a.swaps&&this.defeatComponents.push(new SwapChecker(a.swaps)),void 0!==a.time&&this.defeatComponents.push(new TimeChecker(a.time)))};
function PillarSizeChecker(){$("#rules ul").append($("<li class='defeatCond'></li>"))}PillarSizeChecker.prototype.Check=function(a){return a.GetMaxFixed()>=CONFIG.lostThreshold};function ScoreChecker(a){$("#rules ul").append($("<li class='successCond'>Get "+a+" points</li>"));this.val=a}ScoreChecker.prototype.Check=function(a){return a.GetScore()>=this.val};
function BlockChecker(a){0===a?$("#rules ul").append($("<li class='successCond'>Destroy each block</li>")):$("#rules ul").append($("<li class='successCond'>Reduce the block count to "+a+"</li>"));this.val=a}BlockChecker.prototype.Check=function(a){return a.grid.BlockCount()<=this.val};function SwapChecker(a){$("#rules ul").append($("<li class='defeatCond'>Max "+a+" swaps</li>"));this.val=a}SwapChecker.prototype.Check=function(a){return a.swapCount>this.val};
function TimeChecker(a){$("#rules ul").append($("<li class='defeatCond'>Max "+a+" seconds</li>"));this.val=a}TimeChecker.prototype.Check=function(a){return a.tics/TIC_PER_SEC>this.val};
