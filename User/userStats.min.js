function UserStats(){this.points={};this.timesLow={};this.timesHigh={};this.bestGameStats={};this.totalGameStats={}}UserStats.prototype.SetMaxStat=function(a,b,c){if(this[c].hasOwnProperty(b))for(var d=0;d<this[c][b].length;d+=1){if(a>=this[c][b][d]){this[c][b].splice(d,0,a);this[c][b].splice(this[c][b].length-1,1);break}}else this[c][b]=[a,0,0,0,0];UserStorage.GetStorage().Set("UserStats_"+c,this[c])};
UserStats.prototype.SetMinStat=function(a,b,c){if(this[c].hasOwnProperty(b))for(var d=0;d<this[c][b].length;d+=1){if(a<=this[c][b][d]||-1===this[c][b][d]){this[c][b].splice(d,0,a);this[c][b].splice(this[c][b].length-1,1);break}}else this[c][b]=[a,-1,-1,-1,-1];UserStorage.GetStorage().Set("UserStats_"+c,this[c])};
UserStats.prototype.AddGame=function(a,b){var c=UserStorage.GetStorage();this.bestGameStats.hasOwnProperty(b)?GameStats.KeepBest(this.bestGameStats[b],a):this.bestGameStats[b]=a;c.Set("UserStats_bestGameStats",this.bestGameStats);this.totalGameStats.hasOwnProperty(b)?GameStats.Append(this.totalGameStats[b],a):this.totalGameStats[b]=a;c.Set("UserStats_totalGameStats",this.totalGameStats);this.SetMaxStat(a.score,b,"points");this.SetMinStat(a.time,b,"timesLow");this.SetMaxStat(a.time,b,"timesHigh")};
UserStats.prototype.GetBestGameStats=function(a){return this.bestGameStats.hasOwnProperty(a)?this.bestGameStats[a]:new GameStats(a)};UserStats.prototype.GetTotalGameStats=function(a){return this.totalGameStats.hasOwnProperty(a)?this.totalGameStats[a]:new GameStats(a)};UserStats.prototype.GetHighScore=function(a){return this.points.hasOwnProperty(a)?this.points[a]:[0,0,0,0,0]};UserStats.prototype.GetMinTime=function(a){return this.timesLow.hasOwnProperty(a)?this.timesLow[a]:[-1,-1,-1,-1,-1]};
UserStats.prototype.GetMaxTime=function(a){return this.timesHigh.hasOwnProperty(a)?this.timesHigh[a]:[0,0,0,0,0]};UserStats.GetUserStats=function(){var a=UserStorage.GetStorage(),b=a.Get("UserStats_points"),c=a.Get("UserStats_timesLow"),d=a.Get("UserStats_timesHigh"),f=a.Get("UserStats_bestGameStats"),a=a.Get("UserStats_totalGameStats"),e=new UserStats;null!==b&&(e.points=b);null!==c&&(e.timesLow=c);null!==d&&(e.timesHigh=d);null!==f&&(e.bestGameStats=f);null!==a&&(e.totalGameStats=a);return e};
