angular.module("angularApp.factories").factory("gameStatsFactory",[function(){"use strict";function a(){this.reset()}return a.prototype.reset=function(){this.score=0,this.time=0,this.blockDestroyed=0,this.multilines=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.lineSizes=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.gameCount=0,this.swapCount=0},a.prototype.addLines=function(a,b){this.score+=b;var c=a.length-2;this.multilines[c]+=1;for(var d=0;d<a.length;d+=1){var e=[];$.each(a[d],function(a,b){-1===$.inArray(b,e)&&e.push(b)}),this.lineSizes[e.length-3]+=1,this.blockDestroyed+=e.length}},a.prototype.setTime=function(a){this.time=a},a.prototype.setSwaps=function(a){this.swapCount=a},a.prototype.append=function(a){this.gameCount+=a.gameCount,this.score+=a.score,this.time+=a.time,this.blockDestroyed+=a.blockDestroyed,this.swapCount+=a.swapCount;for(var b=0;b<this.multilines.length;b+=1)this.multilines[b]+=a.multilines[b];for(b=0;b<this.lineSizes.length;b+=1)this.lineSizes[b]+=a.lineSizes[b]},a.prototype.keepBest=function(a){this.gameCount+=a.gameCount,this.score=this.score>a.score?this.score:a.score,this.time=this.time>a.time?this.time:a.time,this.blockDestroyed=this.blockDestroyed>a.blockDestroyed?this.blockDestroyed:a.blockDestroyed,this.swapCount=this.swapCount>a.swapCount?this.swapCount:a.swapCount;for(var b=0;b<this.multilines.length;b+=1)this.multilines[b]=this.multilines[b]>a.multilines[b]?this.multilines[b]:a.multilines[b];for(b=0;b<this.lineSizes.length;b+=1)this.lineSizes[b]=this.lineSizes[b]>a.lineSizes[b]?this.lineSizes[b]:a.lineSizes[b]},{newGameStats:function(){return new a},newGameStatsFrom:function(b){var c=new a;return c.keepBest(b),c}}}]);