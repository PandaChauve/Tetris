angular.module("angularApp.factories").factory("achievements",["storage","TIC_PER_SEC","SEC_PER_MIN","userStats","notifications",function(a,b,c,d,e){"use strict";function f(){this.container=a.Get("UserAchievements")||[];for(var b=this.container.length;b<f.List.enumSize;b+=1)this.container[b]=!1}return f.prototype.isWon=function(a){return this.container[a]},f.prototype.check=function(b,c){for(var d=0;d<f.List.enumSize;d+=1)this.checkIndividual(d,b,c);a.Set("UserAchievements",this.container)},f.prototype.keyToScore=function(a){switch(a){case f.List.Beginner:return 10;case f.List.Expert:return 80;case f.List.Master:return 160;case f.List.God:return 350;case f.List.Cheater:return 1e3}throw"What are you doing here ?"},f.prototype.checkMultiLines=function(a,b){var c=0;switch(a){case f.List.Ambidextrous:c=1;break;case f.List.Psychics:c=2;break;case f.List.Sorcerer:c=3;break;default:throw"What are you doing here ?"}for(;c<b.multilines.length;c+=1)if(b.multilines[c])return!0;return!1},f.prototype.checkIndividual=function(a,g,h){if(!this.container[a]){switch(a){case f.List.Beginner:case f.List.Expert:case f.List.Master:case f.List.God:"classic"===h&&(this.container[a]=g.score>=this.keyToScore(a));break;case f.List.Cheater:"sandbox"===h&&(this.container[a]=g.score>=this.keyToScore(a));break;case f.List.Ambidextrous:case f.List.Psychics:case f.List.Sorcerer:this.container[a]=this.checkMultiLines(a,g);break;case f.List.Stubborn:this.container[a]=d.getTotalGameStats(h).time>b*c*30;break;case f.List.BiggerIsBetter:for(var i=3;i<g.lineSizes.length;i+=1)if(g.lineSizes[i]){this.container[a]=!0;break}}this.container[a]&&e.notify("Gratz you unlocked : "+f.List.getName(a))}},f.List={Beginner:0,Expert:1,Master:2,God:3,Cheater:4,Ambidextrous:5,Psychics:6,Sorcerer:7,Stubborn:8,BiggerIsBetter:9,Nostalgic:10,enumSize:11},f.List.getName=function(a){for(var b in f.List)if(f.List[b]===a)return b;return""},f.List.getDescription=function(a){switch(a){case f.List.Beginner:return"Get 10 points in classic";case f.List.Expert:return"Get 80 points in classic";case f.List.Master:return"Get 160 points in classic";case f.List.God:return"Get 350 points in classic";case f.List.Cheater:return"Get 1000 points in sandbox";case f.List.Ambidextrous:return"Get 2 series at once in any game mode";case f.List.Psychics:return"Get 3 series at once in any game mode";case f.List.Sorcerer:return"Get 4 series at once in any game mode";case f.List.Stubborn:return"Play for 30 minutes in any game mode";case f.List.BiggerIsBetter:return"Create a line of 6 blocks in any game mode";case f.List.Nostalgic:return"Not working yet :)"}return""},f.prototype.List=f.List,new f}]);