angular.module("angularApp.controllers").controller("ModalInstanceCtrl",["$scope","$modalInstance","gameName","userStats","stateChecker","helpers","storage",function(a,b,c,d,e,f,g){"use strict";a.won=e.victory(),a.published=!1,a.publish=function(){if(!a.published){a.published=!0;var b=g.Get("UserName")||"";if(b=prompt("Who are you ?",b)){g.Set("UserName",b);var e=stringToHex(des("wireshar","yop"+d.getCurrentGame().score,1,0));$.get("http://sylvain.luthana.be/api.php?add&name="+b+"&value="+e+"&map="+c)}else a.published=!1}},a.nextGame=function(){b.close()},a.stop=function(){b.dismiss("cancel")},a.stats=function(){function a(a,b,c){return void 0===c&&(c=Math.floor),c(a/b)}var b=d.getBestGameStats(c),e=d.getTotalGameStats(c),g=d.getCurrentGame(),h=[];return h.push({name:"Score",value:g.score,best:b.score,sum:e.score,mean:a(e.score,e.gameCount)}),h.push({name:"Time",value:f.timeFromTics(g.time),best:f.timeFromTics(b.time),sum:f.timeFromTics(e.time),mean:a(e.time,e.gameCount,f.timeFromTics)}),h.push({name:"Blocks",value:g.blockDestroyed,best:b.blockDestroyed,sum:e.blockDestroyed,mean:a(e.blockDestroyed,e.gameCount)}),h.push({name:"Swaps",value:g.swapCount,best:b.swapCount,sum:e.swapCount,mean:a(e.swapCount,e.gameCount)}),h.push({name:"Efficiency",value:(g.score/g.swapCount).toFixed(2),best:"/",sum:"/",mean:(e.score/e.swapCount).toFixed(2)}),h}()}]);