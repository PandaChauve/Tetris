var angularAppC=angular.module("angularApp.controllers");
angularAppC.controller("ModalInstanceCtrl",["$scope","$modalInstance","won","gameName","statistics",function(b,h,k,g,d){b.won=k;b.published=!1;b.publish=function(){if(!b.published){b.published=!0;var e=UserStorage.GetStorage(),a=e.Get("UserName")||"";(a=prompt("Who are you ?",a))?(e.Set("UserName",a),e=stringToHex(des("wireshar","yop"+d.score,1,0)),$.get("http://sylvain.luthana.be/api.php?add&name="+a+"&value="+e+"&map="+g)):b.published=!1}};b.nextGame=function(){h.close()};b.stop=function(){h.dismiss("cancel")};
b.stats=function(){function b(a,d,c){void 0===c&&(c=Math.floor);return c(a/d)}var a=UserStats.GetUserStats(),f=a.GetBestGameStats(g),a=a.GetTotalGameStats(g),c=[];c.push({name:"Score",value:d.score,best:f.score,sum:a.score,mean:b(a.score,a.gameCount)});c.push({name:"Time",value:TimeFromTics(d.time),best:TimeFromTics(f.time),sum:TimeFromTics(a.time),mean:b(a.time,a.gameCount,TimeFromTics)});c.push({name:"Blocks",value:d.blockDestroyed,best:f.blockDestroyed,sum:a.blockDestroyed,mean:b(a.blockDestroyed,
a.gameCount)});c.push({name:"Swaps",value:d.swapCount,best:f.swapCount,sum:a.swapCount,mean:b(a.swapCount,a.gameCount)});c.push({name:"Efficiency",value:(d.score/d.swapCount).toFixed(2),best:"/",sum:"/",mean:(a.score/a.swapCount).toFixed(2)});return c}()}]);
