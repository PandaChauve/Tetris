function ThreeRenderer(a){"use strict";void 0===a&&(a=1),this.camera=this.CreateCamera(),this.renderer=this.CreateRenderer(),this.light=this.CreateLight(),this.cursor=[this.CreateCursor(32896)];for(var b=1;a>b;b+=1)this.cursor.push(this.CreateCursor(8388736));this.scene=this.CreateScene(),this.offset=0,this.id=String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()}function CalculateX(a,b){"use strict";return a.state===Block.EState.SwappedLeft?b+CONFIG.pixelPerBox/100*(100-a.animationState):a.state===Block.EState.SwappedRight?b-CONFIG.pixelPerBox/100*(100-a.animationState):b}function ThreeRenderer(a){"use strict";void 0===a&&(a=1),this.camera=this.CreateCamera(),this.renderer=this.CreateRenderer(),this.light=this.CreateLight(),this.cursor=[this.CreateCursor(32896)];for(var b=1;a>b;b+=1)this.cursor.push(this.CreateCursor(8388736));this.scene=this.CreateScene(),this.offset=0,this.id=String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()}function CalculateX(a,b){"use strict";return a.state===Block.EState.SwappedLeft?b+CONFIG.pixelPerBox/100*(100-a.animationState):a.state===Block.EState.SwappedRight?b-CONFIG.pixelPerBox/100*(100-a.animationState):b}function ThreeRenderer(a){"use strict";void 0===a&&(a=1),this.camera=this.CreateCamera(),this.renderer=this.CreateRenderer(),this.light=this.CreateLight(),this.cursor=[this.CreateCursor(32896)];for(var b=1;a>b;b+=1)this.cursor.push(this.CreateCursor(8388736));this.scene=this.CreateScene(),this.offset=0,this.id=String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()}function CalculateX(a,b){"use strict";return a.state===Block.EState.SwappedLeft?b+CONFIG.pixelPerBox/100*(100-a.animationState):a.state===Block.EState.SwappedRight?b-CONFIG.pixelPerBox/100*(100-a.animationState):b}function ThreeRenderer(a){"use strict";void 0===a&&(a=1),this.camera=this.CreateCamera(),this.renderer=this.CreateRenderer(),this.light=this.CreateLight(),this.cursor=[this.CreateCursor(32896)];for(var b=1;a>b;b+=1)this.cursor.push(this.CreateCursor(8388736));this.scene=this.CreateScene(),this.offset=0,this.id=String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()}function CalculateX(a,b){"use strict";return a.state===Block.EState.SwappedLeft?b+CONFIG.pixelPerBox/100*(100-a.animationState):a.state===Block.EState.SwappedRight?b-CONFIG.pixelPerBox/100*(100-a.animationState):b}function ThreeRenderer(a){"use strict";void 0===a&&(a=1),this.camera=this.CreateCamera(),this.renderer=this.CreateRenderer(),this.light=this.CreateLight(),this.cursor=[this.CreateCursor(32896)];for(var b=1;a>b;b+=1)this.cursor.push(this.CreateCursor(8388736));this.scene=this.CreateScene(),this.offset=0,this.id=String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()}function CalculateX(a,b){"use strict";return a.state===Block.EState.SwappedLeft?b+CONFIG.pixelPerBox/100*(100-a.animationState):a.state===Block.EState.SwappedRight?b-CONFIG.pixelPerBox/100*(100-a.animationState):b}function ThreeRenderer(a){"use strict";void 0===a&&(a=1),this.camera=this.CreateCamera(),this.renderer=this.CreateRenderer(),this.light=this.CreateLight(),this.cursor=[this.CreateCursor(32896)];for(var b=1;a>b;b+=1)this.cursor.push(this.CreateCursor(8388736));this.scene=this.CreateScene(),this.offset=0,this.id=String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()}function CalculateX(a,b){"use strict";return a.state===Block.EState.SwappedLeft?b+CONFIG.pixelPerBox/100*(100-a.animationState):a.state===Block.EState.SwappedRight?b-CONFIG.pixelPerBox/100*(100-a.animationState):b}function ThreeRenderer(a){"use strict";void 0===a&&(a=1),this.camera=this.CreateCamera(),this.renderer=this.CreateRenderer(),this.light=this.CreateLight(),this.cursor=[this.CreateCursor(32896)];for(var b=1;a>b;b+=1)this.cursor.push(this.CreateCursor(8388736));this.scene=this.CreateScene(),this.offset=0,this.id=String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()}function CalculateX(a,b){"use strict";return a.state===Block.EState.SwappedLeft?b+CONFIG.pixelPerBox/100*(100-a.animationState):a.state===Block.EState.SwappedRight?b-CONFIG.pixelPerBox/100*(100-a.animationState):b}function ThreeRenderer(a){"use strict";void 0===a&&(a=1),this.camera=this.CreateCamera(),this.renderer=this.CreateRenderer(),this.light=this.CreateLight(),this.cursor=[this.CreateCursor(32896)];for(var b=1;a>b;b+=1)this.cursor.push(this.CreateCursor(8388736));this.scene=this.CreateScene(),this.offset=0,this.id=String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()}function CalculateX(a,b){"use strict";return a.state===Block.EState.SwappedLeft?b+CONFIG.pixelPerBox/100*(100-a.animationState):a.state===Block.EState.SwappedRight?b-CONFIG.pixelPerBox/100*(100-a.animationState):b}ThreeRenderer.prototype.clear=function(){"use strict";this.scene=null,this.light=null,this.camera=null,this.cursor=null,this.renderer=null},ThreeRenderer.prototype.CreateLight=function(){"use strict";var a=new THREE.DirectionalLight(13421772);return a.position.set(500,1e3,2e3),a.castShadow=!0,a.shadowCameraVisible=!1,a.shadowDarkness=.2,a.shadowMapWidth=a.shadowMapHeight=1e3,a},ThreeRenderer.prototype.CreateScene=function(){"use strict";var a=new THREE.Scene;a.add(this.light);for(var b=0;b<this.cursor.length;b+=1)a.add(this.cursor[b]);var c=new THREE.PlaneGeometry(1e3,400),d=new THREE.MeshBasicMaterial({color:0,side:THREE.DoubleSide,transparent:!0,opacity:.5}),e=new THREE.Mesh(c,d);e.rotation.x+=1.62,e.position.setY(CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2),e.renderDepth=1,a.add(e),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:3342336,emissive:10027008});var f=new THREE.Mesh(c,d);return f.position.set(0,(CONFIG.hiddenRowCount+CONFIG.displayedRowCount)*CONFIG.pixelPerBox,10),a.add(f),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:13056,emissive:39168}),f=new THREE.Mesh(c,d),f.position.set(0,CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2+5,10),a.add(f),a},ThreeRenderer.prototype.CreateCamera=function(){"use strict";var a=new THREE.PerspectiveCamera(75,.7,.3,1e3);return a.position.z=450,a.position.x=-27,a.position.y=410,a},ThreeRenderer.prototype.CreateRenderer=function(){"use strict";var a=new THREE.WebGLRenderer({antialias:!0});return a.setClearColor(0),a.setSize(420,600),a.shadowMapEnabled=!0,a.shadowMapSoft=!0,a},ThreeRenderer.prototype.AddCube=function(a){"use strict";var b=new THREE.BoxGeometry(.7*CONFIG.pixelPerBox,.7*CONFIG.pixelPerBox,CONFIG.pixelPerBox/4),c=new THREE.MeshPhongMaterial({color:a,emissive:1118481}),d=new THREE.Mesh(b,c);return this.scene.add(d),d.id},ThreeRenderer.prototype.UpdateCube=function(a,b){"use strict";var c=this.scene.getObjectById(b.id);c.position.setY(b.verticalPosition+this.offset),c.position.setX(CalculateX(b,a)),c.material.color=new THREE.Color(b.GetHexColor()),b.state===Block.EState.Disappearing&&(c.material.opacity=Math.max(1-b.animationState/100,0),c.material.transparent=!0),0===c.material.opacity&&(this.scene.remove(c),b.id=-1)},ThreeRenderer.prototype.Render=function(){"use strict";this.light.position.setY(1e3+this.offset),this.renderer.render(this.scene,this.camera)},ThreeRenderer.prototype.LinkDom=function(a){"use strict";this.renderer.domElement.setAttribute("id",this.id);var b=$("#"+a+" .gamePlaceHolder");if(0===b.length)throw a+"missing gameplaceHolder";b.empty(),b.append($(this.renderer.domElement))},ThreeRenderer.prototype.UnlinkDom=function(){"use strict";var a=document.getElementById(this.id);null!==a&&a.parentNode.removeChild(a)},ThreeRenderer.prototype.CreateCursor=function(a){"use strict";var b=new THREE.Shape;return b.absarc(72,-13,10,-Math.PI/2,0,!0),b.lineTo(82,0),b.absarc(72,13,10,0,Math.PI/2,!0),b.lineTo(35,20),b.lineTo(35,0),b.absarc(-2,-13,10,3*Math.PI/2,Math.PI,!0),b.lineTo(-12,0),b.absarc(-2,13,10,Math.PI,Math.PI/2,!0),b.lineTo(35,-20),new THREE.PointCloud(b.createPointsGeometry(),new THREE.PointCloudMaterial({color:a,size:4}))},ThreeRenderer.prototype.DrawCursorOn=function(a,b,c){"use strict";void 0===c&&(c=0),this.cursor[c].position.set((a-CONFIG.columnCount/2)*CONFIG.pixelPerBox-10,b*(CONFIG.pixelPerBox-.5)+this.offset+5,7)},ThreeRenderer.prototype.Freeze=function(){"use strict";for(var a=0;a<this.cursor.length;a+=1)this.scene.remove(this.cursor[a]);this.Render()},ThreeRenderer.prototype.RenderTetris=function(a){"use strict";this.offset=a.groundPos;for(var b,c=0;c<CONFIG.columnCount;c+=1)for(var d=0;d<a.grid.container[c].length;d+=1)b=a.grid.container[c][d],b.type!==Block.EType.PlaceHolder&&(-1===b.id&&(b.id=this.AddCube(b.GetHexColor())),this.UpdateCube((c-CONFIG.columnCount/2)*CONFIG.pixelPerBox,b));for(c=0;c<a.cursor.length;c+=1)this.DrawCursorOn(a.cursor[c].x,a.cursor[c].y,c);this.Render()},ThreeRenderer.prototype.clear=function(){"use strict";this.scene=null,this.light=null,this.camera=null,this.cursor=null,this.renderer=null},ThreeRenderer.prototype.CreateLight=function(){"use strict";var a=new THREE.DirectionalLight(13421772);return a.position.set(500,1e3,2e3),a.castShadow=!0,a.shadowCameraVisible=!1,a.shadowDarkness=.2,a.shadowMapWidth=a.shadowMapHeight=1e3,a},ThreeRenderer.prototype.CreateScene=function(){"use strict";var a=new THREE.Scene;a.add(this.light);for(var b=0;b<this.cursor.length;b+=1)a.add(this.cursor[b]);var c=new THREE.PlaneGeometry(1e3,400),d=new THREE.MeshBasicMaterial({color:0,side:THREE.DoubleSide,transparent:!0,opacity:.5}),e=new THREE.Mesh(c,d);e.rotation.x+=1.62,e.position.setY(CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2),e.renderDepth=1,a.add(e),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:3342336,emissive:10027008});var f=new THREE.Mesh(c,d);return f.position.set(0,(CONFIG.hiddenRowCount+CONFIG.displayedRowCount)*CONFIG.pixelPerBox,10),a.add(f),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:13056,emissive:39168}),f=new THREE.Mesh(c,d),f.position.set(0,CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2+5,10),a.add(f),a},ThreeRenderer.prototype.CreateCamera=function(){"use strict";var a=new THREE.PerspectiveCamera(75,.7,.3,1e3);return a.position.z=450,a.position.x=-27,a.position.y=410,a},ThreeRenderer.prototype.CreateRenderer=function(){"use strict";var a=new THREE.WebGLRenderer({antialias:!0});return a.setClearColor(0),a.setSize(420,600),a.shadowMapEnabled=!0,a.shadowMapSoft=!0,a},ThreeRenderer.prototype.AddCube=function(a){"use strict";var b=new THREE.BoxGeometry(.7*CONFIG.pixelPerBox,.7*CONFIG.pixelPerBox,CONFIG.pixelPerBox/4),c=new THREE.MeshPhongMaterial({color:a,emissive:1118481}),d=new THREE.Mesh(b,c);return this.scene.add(d),d.id},ThreeRenderer.prototype.UpdateCube=function(a,b){"use strict";var c=this.scene.getObjectById(b.id);c.position.setY(b.verticalPosition+this.offset),c.position.setX(CalculateX(b,a)),c.material.color=new THREE.Color(b.GetHexColor()),b.state===Block.EState.Disappearing&&(c.material.opacity=Math.max(1-b.animationState/100,0),c.material.transparent=!0),0===c.material.opacity&&(this.scene.remove(c),b.id=-1)},ThreeRenderer.prototype.Render=function(){"use strict";this.light.position.setY(1e3+this.offset),this.renderer.render(this.scene,this.camera)},ThreeRenderer.prototype.LinkDom=function(a){"use strict";this.renderer.domElement.setAttribute("id",this.id);var b=$("#"+a+" .gamePlaceHolder");if(0===b.length)throw a+"missing gameplaceHolder";b.empty(),b.append($(this.renderer.domElement))},ThreeRenderer.prototype.UnlinkDom=function(){"use strict";var a=document.getElementById(this.id);null!==a&&a.parentNode.removeChild(a)},ThreeRenderer.prototype.CreateCursor=function(a){"use strict";var b=new THREE.Shape;return b.absarc(72,-13,10,-Math.PI/2,0,!0),b.lineTo(82,0),b.absarc(72,13,10,0,Math.PI/2,!0),b.lineTo(35,20),b.lineTo(35,0),b.absarc(-2,-13,10,3*Math.PI/2,Math.PI,!0),b.lineTo(-12,0),b.absarc(-2,13,10,Math.PI,Math.PI/2,!0),b.lineTo(35,-20),new THREE.PointCloud(b.createPointsGeometry(),new THREE.PointCloudMaterial({color:a,size:4}))},ThreeRenderer.prototype.DrawCursorOn=function(a,b,c){"use strict";void 0===c&&(c=0),this.cursor[c].position.set((a-CONFIG.columnCount/2)*CONFIG.pixelPerBox-10,b*(CONFIG.pixelPerBox-.5)+this.offset+5,7)},ThreeRenderer.prototype.Freeze=function(){"use strict";for(var a=0;a<this.cursor.length;a+=1)this.scene.remove(this.cursor[a]);this.Render()},ThreeRenderer.prototype.RenderTetris=function(a){"use strict";this.offset=a.groundPos;for(var b,c=0;c<CONFIG.columnCount;c+=1)for(var d=0;d<a.grid.container[c].length;d+=1)b=a.grid.container[c][d],b.type!==Block.EType.PlaceHolder&&(-1===b.id&&(b.id=this.AddCube(b.GetHexColor())),this.UpdateCube((c-CONFIG.columnCount/2)*CONFIG.pixelPerBox,b));for(c=0;c<a.cursor.length;c+=1)this.DrawCursorOn(a.cursor[c].x,a.cursor[c].y,c);this.Render()},ThreeRenderer.prototype.clear=function(){"use strict";this.scene=null,this.light=null,this.camera=null,this.cursor=null,this.renderer=null},ThreeRenderer.prototype.CreateLight=function(){"use strict";var a=new THREE.DirectionalLight(13421772);return a.position.set(500,1e3,2e3),a.castShadow=!0,a.shadowCameraVisible=!1,a.shadowDarkness=.2,a.shadowMapWidth=a.shadowMapHeight=1e3,a},ThreeRenderer.prototype.CreateScene=function(){"use strict";var a=new THREE.Scene;a.add(this.light);for(var b=0;b<this.cursor.length;b+=1)a.add(this.cursor[b]);var c=new THREE.PlaneGeometry(1e3,400),d=new THREE.MeshBasicMaterial({color:0,side:THREE.DoubleSide,transparent:!0,opacity:.5}),e=new THREE.Mesh(c,d);e.rotation.x+=1.62,e.position.setY(CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2),e.renderDepth=1,a.add(e),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:3342336,emissive:10027008});var f=new THREE.Mesh(c,d);return f.position.set(0,(CONFIG.hiddenRowCount+CONFIG.displayedRowCount)*CONFIG.pixelPerBox,10),a.add(f),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:13056,emissive:39168}),f=new THREE.Mesh(c,d),f.position.set(0,CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2+5,10),a.add(f),a},ThreeRenderer.prototype.CreateCamera=function(){"use strict";var a=new THREE.PerspectiveCamera(75,.7,.3,1e3);return a.position.z=450,a.position.x=-27,a.position.y=410,a},ThreeRenderer.prototype.CreateRenderer=function(){"use strict";var a=new THREE.WebGLRenderer({antialias:!0});return a.setClearColor(0),a.setSize(420,600),a.shadowMapEnabled=!0,a.shadowMapSoft=!0,a},ThreeRenderer.prototype.AddCube=function(a){"use strict";var b=new THREE.BoxGeometry(.7*CONFIG.pixelPerBox,.7*CONFIG.pixelPerBox,CONFIG.pixelPerBox/4),c=new THREE.MeshPhongMaterial({color:a,emissive:1118481}),d=new THREE.Mesh(b,c);return this.scene.add(d),d.id},ThreeRenderer.prototype.UpdateCube=function(a,b){"use strict";var c=this.scene.getObjectById(b.id);c.position.setY(b.verticalPosition+this.offset),c.position.setX(CalculateX(b,a)),c.material.color=new THREE.Color(b.GetHexColor()),b.state===Block.EState.Disappearing&&(c.material.opacity=Math.max(1-b.animationState/100,0),c.material.transparent=!0),0===c.material.opacity&&(this.scene.remove(c),b.id=-1)},ThreeRenderer.prototype.Render=function(){"use strict";this.light.position.setY(1e3+this.offset),this.renderer.render(this.scene,this.camera)},ThreeRenderer.prototype.LinkDom=function(a){"use strict";this.renderer.domElement.setAttribute("id",this.id);var b=$("#"+a+" .gamePlaceHolder");if(0===b.length)throw a+"missing gameplaceHolder";b.empty(),b.append($(this.renderer.domElement))},ThreeRenderer.prototype.UnlinkDom=function(){"use strict";var a=document.getElementById(this.id);null!==a&&a.parentNode.removeChild(a)},ThreeRenderer.prototype.CreateCursor=function(a){"use strict";var b=new THREE.Shape;return b.absarc(72,-13,10,-Math.PI/2,0,!0),b.lineTo(82,0),b.absarc(72,13,10,0,Math.PI/2,!0),b.lineTo(35,20),b.lineTo(35,0),b.absarc(-2,-13,10,3*Math.PI/2,Math.PI,!0),b.lineTo(-12,0),b.absarc(-2,13,10,Math.PI,Math.PI/2,!0),b.lineTo(35,-20),new THREE.PointCloud(b.createPointsGeometry(),new THREE.PointCloudMaterial({color:a,size:4}))},ThreeRenderer.prototype.DrawCursorOn=function(a,b,c){"use strict";void 0===c&&(c=0),this.cursor[c].position.set((a-CONFIG.columnCount/2)*CONFIG.pixelPerBox-10,b*(CONFIG.pixelPerBox-.5)+this.offset+5,7)},ThreeRenderer.prototype.Freeze=function(){"use strict";for(var a=0;a<this.cursor.length;a+=1)this.scene.remove(this.cursor[a]);this.Render()},ThreeRenderer.prototype.RenderTetris=function(a){"use strict";this.offset=a.groundPos;for(var b,c=0;c<CONFIG.columnCount;c+=1)for(var d=0;d<a.grid.container[c].length;d+=1)b=a.grid.container[c][d],b.type!==Block.EType.PlaceHolder&&(-1===b.id&&(b.id=this.AddCube(b.GetHexColor())),this.UpdateCube((c-CONFIG.columnCount/2)*CONFIG.pixelPerBox,b));for(c=0;c<a.cursor.length;c+=1)this.DrawCursorOn(a.cursor[c].x,a.cursor[c].y,c);this.Render()},ThreeRenderer.prototype.clear=function(){"use strict";this.scene=null,this.light=null,this.camera=null,this.cursor=null,this.renderer=null},ThreeRenderer.prototype.CreateLight=function(){"use strict";var a=new THREE.DirectionalLight(13421772);return a.position.set(500,1e3,2e3),a.castShadow=!0,a.shadowCameraVisible=!1,a.shadowDarkness=.2,a.shadowMapWidth=a.shadowMapHeight=1e3,a},ThreeRenderer.prototype.CreateScene=function(){"use strict";var a=new THREE.Scene;a.add(this.light);for(var b=0;b<this.cursor.length;b+=1)a.add(this.cursor[b]);var c=new THREE.PlaneGeometry(1e3,400),d=new THREE.MeshBasicMaterial({color:0,side:THREE.DoubleSide,transparent:!0,opacity:.5}),e=new THREE.Mesh(c,d);e.rotation.x+=1.62,e.position.setY(CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2),e.renderDepth=1,a.add(e),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:3342336,emissive:10027008});var f=new THREE.Mesh(c,d);return f.position.set(0,(CONFIG.hiddenRowCount+CONFIG.displayedRowCount)*CONFIG.pixelPerBox,10),a.add(f),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:13056,emissive:39168}),f=new THREE.Mesh(c,d),f.position.set(0,CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2+5,10),a.add(f),a},ThreeRenderer.prototype.CreateCamera=function(){"use strict";var a=new THREE.PerspectiveCamera(75,.7,.3,1e3);return a.position.z=450,a.position.x=-27,a.position.y=410,a},ThreeRenderer.prototype.CreateRenderer=function(){"use strict";var a=new THREE.WebGLRenderer({antialias:!0});return a.setClearColor(0),a.setSize(420,600),a.shadowMapEnabled=!0,a.shadowMapSoft=!0,a},ThreeRenderer.prototype.AddCube=function(a){"use strict";var b=new THREE.BoxGeometry(.7*CONFIG.pixelPerBox,.7*CONFIG.pixelPerBox,CONFIG.pixelPerBox/4),c=new THREE.MeshPhongMaterial({color:a,emissive:1118481}),d=new THREE.Mesh(b,c);return this.scene.add(d),d.id},ThreeRenderer.prototype.UpdateCube=function(a,b){"use strict";var c=this.scene.getObjectById(b.id);c.position.setY(b.verticalPosition+this.offset),c.position.setX(CalculateX(b,a)),c.material.color=new THREE.Color(b.GetHexColor()),b.state===Block.EState.Disappearing&&(c.material.opacity=Math.max(1-b.animationState/100,0),c.material.transparent=!0),0===c.material.opacity&&(this.scene.remove(c),b.id=-1)},ThreeRenderer.prototype.Render=function(){"use strict";this.light.position.setY(1e3+this.offset),this.renderer.render(this.scene,this.camera)},ThreeRenderer.prototype.LinkDom=function(a){"use strict";this.renderer.domElement.setAttribute("id",this.id);var b=$("#"+a+" .gamePlaceHolder");if(0===b.length)throw a+"missing gameplaceHolder";b.empty(),b.append($(this.renderer.domElement))},ThreeRenderer.prototype.UnlinkDom=function(){"use strict";var a=document.getElementById(this.id);null!==a&&a.parentNode.removeChild(a)},ThreeRenderer.prototype.CreateCursor=function(a){"use strict";var b=new THREE.Shape;return b.absarc(72,-13,10,-Math.PI/2,0,!0),b.lineTo(82,0),b.absarc(72,13,10,0,Math.PI/2,!0),b.lineTo(35,20),b.lineTo(35,0),b.absarc(-2,-13,10,3*Math.PI/2,Math.PI,!0),b.lineTo(-12,0),b.absarc(-2,13,10,Math.PI,Math.PI/2,!0),b.lineTo(35,-20),new THREE.PointCloud(b.createPointsGeometry(),new THREE.PointCloudMaterial({color:a,size:4}))},ThreeRenderer.prototype.DrawCursorOn=function(a,b,c){"use strict";void 0===c&&(c=0),this.cursor[c].position.set((a-CONFIG.columnCount/2)*CONFIG.pixelPerBox-10,b*(CONFIG.pixelPerBox-.5)+this.offset+5,7)},ThreeRenderer.prototype.Freeze=function(){"use strict";for(var a=0;a<this.cursor.length;a+=1)this.scene.remove(this.cursor[a]);this.Render()},ThreeRenderer.prototype.RenderTetris=function(a){"use strict";this.offset=a.groundPos;for(var b,c=0;c<CONFIG.columnCount;c+=1)for(var d=0;d<a.grid.container[c].length;d+=1)b=a.grid.container[c][d],b.type!==Block.EType.PlaceHolder&&(-1===b.id&&(b.id=this.AddCube(b.GetHexColor())),this.UpdateCube((c-CONFIG.columnCount/2)*CONFIG.pixelPerBox,b));for(c=0;c<a.cursor.length;c+=1)this.DrawCursorOn(a.cursor[c].x,a.cursor[c].y,c);this.Render()},ThreeRenderer.prototype.clear=function(){"use strict";this.scene=null,this.light=null,this.camera=null,this.cursor=null,this.renderer=null},ThreeRenderer.prototype.CreateLight=function(){"use strict";var a=new THREE.DirectionalLight(13421772);return a.position.set(500,1e3,2e3),a.castShadow=!0,a.shadowCameraVisible=!1,a.shadowDarkness=.2,a.shadowMapWidth=a.shadowMapHeight=1e3,a},ThreeRenderer.prototype.CreateScene=function(){"use strict";var a=new THREE.Scene;a.add(this.light);for(var b=0;b<this.cursor.length;b+=1)a.add(this.cursor[b]);var c=new THREE.PlaneGeometry(1e3,400),d=new THREE.MeshBasicMaterial({color:0,side:THREE.DoubleSide,transparent:!0,opacity:.5}),e=new THREE.Mesh(c,d);e.rotation.x+=1.62,e.position.setY(CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2),e.renderDepth=1,a.add(e),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:3342336,emissive:10027008});var f=new THREE.Mesh(c,d);return f.position.set(0,(CONFIG.hiddenRowCount+CONFIG.displayedRowCount)*CONFIG.pixelPerBox,10),a.add(f),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:13056,emissive:39168}),f=new THREE.Mesh(c,d),f.position.set(0,CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2+5,10),a.add(f),a},ThreeRenderer.prototype.CreateCamera=function(){"use strict";var a=new THREE.PerspectiveCamera(75,.7,.3,1e3);return a.position.z=450,a.position.x=-27,a.position.y=410,a},ThreeRenderer.prototype.CreateRenderer=function(){"use strict";var a=new THREE.WebGLRenderer({antialias:!0});return a.setClearColor(0),a.setSize(420,600),a.shadowMapEnabled=!0,a.shadowMapSoft=!0,a},ThreeRenderer.prototype.AddCube=function(a){"use strict";var b=new THREE.BoxGeometry(.7*CONFIG.pixelPerBox,.7*CONFIG.pixelPerBox,CONFIG.pixelPerBox/4),c=new THREE.MeshPhongMaterial({color:a,emissive:1118481}),d=new THREE.Mesh(b,c);return this.scene.add(d),d.id},ThreeRenderer.prototype.UpdateCube=function(a,b){"use strict";var c=this.scene.getObjectById(b.id);c.position.setY(b.verticalPosition+this.offset),c.position.setX(CalculateX(b,a)),c.material.color=new THREE.Color(b.GetHexColor()),b.state===Block.EState.Disappearing&&(c.material.opacity=Math.max(1-b.animationState/100,0),c.material.transparent=!0),0===c.material.opacity&&(this.scene.remove(c),b.id=-1)},ThreeRenderer.prototype.Render=function(){"use strict";this.light.position.setY(1e3+this.offset),this.renderer.render(this.scene,this.camera)},ThreeRenderer.prototype.LinkDom=function(a){"use strict";this.renderer.domElement.setAttribute("id",this.id);var b=$("#"+a+" .gamePlaceHolder");if(0===b.length)throw a+"missing gameplaceHolder";b.empty(),b.append($(this.renderer.domElement))},ThreeRenderer.prototype.UnlinkDom=function(){"use strict";var a=document.getElementById(this.id);null!==a&&a.parentNode.removeChild(a)},ThreeRenderer.prototype.CreateCursor=function(a){"use strict";var b=new THREE.Shape;return b.absarc(72,-13,10,-Math.PI/2,0,!0),b.lineTo(82,0),b.absarc(72,13,10,0,Math.PI/2,!0),b.lineTo(35,20),b.lineTo(35,0),b.absarc(-2,-13,10,3*Math.PI/2,Math.PI,!0),b.lineTo(-12,0),b.absarc(-2,13,10,Math.PI,Math.PI/2,!0),b.lineTo(35,-20),new THREE.PointCloud(b.createPointsGeometry(),new THREE.PointCloudMaterial({color:a,size:4}))},ThreeRenderer.prototype.DrawCursorOn=function(a,b,c){"use strict";void 0===c&&(c=0),this.cursor[c].position.set((a-CONFIG.columnCount/2)*CONFIG.pixelPerBox-10,b*(CONFIG.pixelPerBox-.5)+this.offset+5,7)},ThreeRenderer.prototype.Freeze=function(){"use strict";for(var a=0;a<this.cursor.length;a+=1)this.scene.remove(this.cursor[a]);this.Render()},ThreeRenderer.prototype.RenderTetris=function(a){"use strict";this.offset=a.groundPos;for(var b,c=0;c<CONFIG.columnCount;c+=1)for(var d=0;d<a.grid.container[c].length;d+=1)b=a.grid.container[c][d],b.type!==Block.EType.PlaceHolder&&(-1===b.id&&(b.id=this.AddCube(b.GetHexColor())),this.UpdateCube((c-CONFIG.columnCount/2)*CONFIG.pixelPerBox,b));for(c=0;c<a.cursor.length;c+=1)this.DrawCursorOn(a.cursor[c].x,a.cursor[c].y,c);this.Render()},ThreeRenderer.prototype.clear=function(){"use strict";this.scene=null,this.light=null,this.camera=null,this.cursor=null,this.renderer=null},ThreeRenderer.prototype.CreateLight=function(){"use strict";var a=new THREE.DirectionalLight(13421772);return a.position.set(500,1e3,2e3),a.castShadow=!0,a.shadowCameraVisible=!1,a.shadowDarkness=.2,a.shadowMapWidth=a.shadowMapHeight=1e3,a},ThreeRenderer.prototype.CreateScene=function(){"use strict";var a=new THREE.Scene;a.add(this.light);for(var b=0;b<this.cursor.length;b+=1)a.add(this.cursor[b]);var c=new THREE.PlaneGeometry(1e3,400),d=new THREE.MeshBasicMaterial({color:0,side:THREE.DoubleSide,transparent:!0,opacity:.5}),e=new THREE.Mesh(c,d);e.rotation.x+=1.62,e.position.setY(CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2),e.renderDepth=1,a.add(e),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:3342336,emissive:10027008});var f=new THREE.Mesh(c,d);return f.position.set(0,(CONFIG.hiddenRowCount+CONFIG.displayedRowCount)*CONFIG.pixelPerBox,10),a.add(f),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:13056,emissive:39168}),f=new THREE.Mesh(c,d),f.position.set(0,CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2+5,10),a.add(f),a},ThreeRenderer.prototype.CreateCamera=function(){"use strict";var a=new THREE.PerspectiveCamera(75,.7,.3,1e3);return a.position.z=450,a.position.x=-27,a.position.y=410,a},ThreeRenderer.prototype.CreateRenderer=function(){"use strict";var a=new THREE.WebGLRenderer({antialias:!0});return a.setClearColor(0),a.setSize(420,600),a.shadowMapEnabled=!0,a.shadowMapSoft=!0,a},ThreeRenderer.prototype.AddCube=function(a){"use strict";var b=new THREE.BoxGeometry(.7*CONFIG.pixelPerBox,.7*CONFIG.pixelPerBox,CONFIG.pixelPerBox/4),c=new THREE.MeshPhongMaterial({color:a,emissive:1118481}),d=new THREE.Mesh(b,c);return this.scene.add(d),d.id},ThreeRenderer.prototype.UpdateCube=function(a,b){"use strict";var c=this.scene.getObjectById(b.id);c.position.setY(b.verticalPosition+this.offset),c.position.setX(CalculateX(b,a)),c.material.color=new THREE.Color(b.GetHexColor()),b.state===Block.EState.Disappearing&&(c.material.opacity=Math.max(1-b.animationState/100,0),c.material.transparent=!0),0===c.material.opacity&&(this.scene.remove(c),b.id=-1)},ThreeRenderer.prototype.Render=function(){"use strict";this.light.position.setY(1e3+this.offset),this.renderer.render(this.scene,this.camera)},ThreeRenderer.prototype.LinkDom=function(a){"use strict";this.renderer.domElement.setAttribute("id",this.id);var b=$("#"+a+" .gamePlaceHolder");if(0===b.length)throw a+"missing gameplaceHolder";b.empty(),b.append($(this.renderer.domElement))},ThreeRenderer.prototype.UnlinkDom=function(){"use strict";var a=document.getElementById(this.id);null!==a&&a.parentNode.removeChild(a)},ThreeRenderer.prototype.CreateCursor=function(a){"use strict";var b=new THREE.Shape;return b.absarc(72,-13,10,-Math.PI/2,0,!0),b.lineTo(82,0),b.absarc(72,13,10,0,Math.PI/2,!0),b.lineTo(35,20),b.lineTo(35,0),b.absarc(-2,-13,10,3*Math.PI/2,Math.PI,!0),b.lineTo(-12,0),b.absarc(-2,13,10,Math.PI,Math.PI/2,!0),b.lineTo(35,-20),new THREE.PointCloud(b.createPointsGeometry(),new THREE.PointCloudMaterial({color:a,size:4}))},ThreeRenderer.prototype.DrawCursorOn=function(a,b,c){"use strict";void 0===c&&(c=0),this.cursor[c].position.set((a-CONFIG.columnCount/2)*CONFIG.pixelPerBox-10,b*(CONFIG.pixelPerBox-.5)+this.offset+5,7)},ThreeRenderer.prototype.Freeze=function(){"use strict";for(var a=0;a<this.cursor.length;a+=1)this.scene.remove(this.cursor[a]);this.Render()},ThreeRenderer.prototype.RenderTetris=function(a){"use strict";this.offset=a.groundPos;for(var b,c=0;c<CONFIG.columnCount;c+=1)for(var d=0;d<a.grid.container[c].length;d+=1)b=a.grid.container[c][d],b.type!==Block.EType.PlaceHolder&&(-1===b.id&&(b.id=this.AddCube(b.GetHexColor())),this.UpdateCube((c-CONFIG.columnCount/2)*CONFIG.pixelPerBox,b));for(c=0;c<a.cursor.length;c+=1)this.DrawCursorOn(a.cursor[c].x,a.cursor[c].y,c);this.Render()},ThreeRenderer.prototype.clear=function(){"use strict";this.scene=null,this.light=null,this.camera=null,this.cursor=null,this.renderer=null},ThreeRenderer.prototype.CreateLight=function(){"use strict";var a=new THREE.DirectionalLight(13421772);return a.position.set(500,1e3,2e3),a.castShadow=!0,a.shadowCameraVisible=!1,a.shadowDarkness=.2,a.shadowMapWidth=a.shadowMapHeight=1e3,a},ThreeRenderer.prototype.CreateScene=function(){"use strict";var a=new THREE.Scene;a.add(this.light);for(var b=0;b<this.cursor.length;b+=1)a.add(this.cursor[b]);var c=new THREE.PlaneGeometry(1e3,400),d=new THREE.MeshBasicMaterial({color:0,side:THREE.DoubleSide,transparent:!0,opacity:.5}),e=new THREE.Mesh(c,d);e.rotation.x+=1.62,e.position.setY(CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2),e.renderDepth=1,a.add(e),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:3342336,emissive:10027008});var f=new THREE.Mesh(c,d);return f.position.set(0,(CONFIG.hiddenRowCount+CONFIG.displayedRowCount)*CONFIG.pixelPerBox,10),a.add(f),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:13056,emissive:39168}),f=new THREE.Mesh(c,d),f.position.set(0,CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2+5,10),a.add(f),a},ThreeRenderer.prototype.CreateCamera=function(){"use strict";var a=new THREE.PerspectiveCamera(75,.7,.3,1e3);return a.position.z=450,a.position.x=-27,a.position.y=410,a},ThreeRenderer.prototype.CreateRenderer=function(){"use strict";var a=new THREE.WebGLRenderer({antialias:!0});return a.setClearColor(0),a.setSize(420,600),a.shadowMapEnabled=!0,a.shadowMapSoft=!0,a},ThreeRenderer.prototype.AddCube=function(a){"use strict";var b=new THREE.BoxGeometry(.7*CONFIG.pixelPerBox,.7*CONFIG.pixelPerBox,CONFIG.pixelPerBox/4),c=new THREE.MeshPhongMaterial({color:a,emissive:1118481}),d=new THREE.Mesh(b,c);return this.scene.add(d),d.id},ThreeRenderer.prototype.UpdateCube=function(a,b){"use strict";var c=this.scene.getObjectById(b.id);c.position.setY(b.verticalPosition+this.offset),c.position.setX(CalculateX(b,a)),c.material.color=new THREE.Color(b.GetHexColor()),b.state===Block.EState.Disappearing&&(c.material.opacity=Math.max(1-b.animationState/100,0),c.material.transparent=!0),0===c.material.opacity&&(this.scene.remove(c),b.id=-1)},ThreeRenderer.prototype.Render=function(){"use strict";this.light.position.setY(1e3+this.offset),this.renderer.render(this.scene,this.camera)},ThreeRenderer.prototype.LinkDom=function(a){"use strict";this.renderer.domElement.setAttribute("id",this.id);var b=$("#"+a+" .gamePlaceHolder");if(0===b.length)throw a+"missing gameplaceHolder";b.empty(),b.append($(this.renderer.domElement))},ThreeRenderer.prototype.UnlinkDom=function(){"use strict";var a=document.getElementById(this.id);null!==a&&a.parentNode.removeChild(a)},ThreeRenderer.prototype.CreateCursor=function(a){"use strict";var b=new THREE.Shape;return b.absarc(72,-13,10,-Math.PI/2,0,!0),b.lineTo(82,0),b.absarc(72,13,10,0,Math.PI/2,!0),b.lineTo(35,20),b.lineTo(35,0),b.absarc(-2,-13,10,3*Math.PI/2,Math.PI,!0),b.lineTo(-12,0),b.absarc(-2,13,10,Math.PI,Math.PI/2,!0),b.lineTo(35,-20),new THREE.PointCloud(b.createPointsGeometry(),new THREE.PointCloudMaterial({
color:a,size:4}))},ThreeRenderer.prototype.DrawCursorOn=function(a,b,c){"use strict";void 0===c&&(c=0),this.cursor[c].position.set((a-CONFIG.columnCount/2)*CONFIG.pixelPerBox-10,b*(CONFIG.pixelPerBox-.5)+this.offset+5,7)},ThreeRenderer.prototype.Freeze=function(){"use strict";for(var a=0;a<this.cursor.length;a+=1)this.scene.remove(this.cursor[a]);this.Render()},ThreeRenderer.prototype.RenderTetris=function(a){"use strict";this.offset=a.groundPos;for(var b,c=0;c<CONFIG.columnCount;c+=1)for(var d=0;d<a.grid.container[c].length;d+=1)b=a.grid.container[c][d],b.type!==Block.EType.PlaceHolder&&(-1===b.id&&(b.id=this.AddCube(b.GetHexColor())),this.UpdateCube((c-CONFIG.columnCount/2)*CONFIG.pixelPerBox,b));for(c=0;c<a.cursor.length;c+=1)this.DrawCursorOn(a.cursor[c].x,a.cursor[c].y,c);this.Render()},ThreeRenderer.prototype.clear=function(){"use strict";this.scene=null,this.light=null,this.camera=null,this.cursor=null,this.renderer=null},ThreeRenderer.prototype.CreateLight=function(){"use strict";var a=new THREE.DirectionalLight(13421772);return a.position.set(500,1e3,2e3),a.castShadow=!0,a.shadowCameraVisible=!1,a.shadowDarkness=.2,a.shadowMapWidth=a.shadowMapHeight=1e3,a},ThreeRenderer.prototype.CreateScene=function(){"use strict";var a=new THREE.Scene;a.add(this.light);for(var b=0;b<this.cursor.length;b+=1)a.add(this.cursor[b]);var c=new THREE.PlaneGeometry(1e3,400),d=new THREE.MeshBasicMaterial({color:0,side:THREE.DoubleSide,transparent:!0,opacity:.5}),e=new THREE.Mesh(c,d);e.rotation.x+=1.62,e.position.setY(CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2),e.renderDepth=1,a.add(e),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:3342336,emissive:10027008});var f=new THREE.Mesh(c,d);return f.position.set(0,(CONFIG.hiddenRowCount+CONFIG.displayedRowCount)*CONFIG.pixelPerBox,10),a.add(f),c=new THREE.BoxGeometry(1e3,3,3),d=new THREE.MeshPhongMaterial({color:13056,emissive:39168}),f=new THREE.Mesh(c,d),f.position.set(0,CONFIG.hiddenRowCount*CONFIG.pixelPerBox-CONFIG.pixelPerBox/2+5,10),a.add(f),a},ThreeRenderer.prototype.CreateCamera=function(){"use strict";var a=new THREE.PerspectiveCamera(75,.7,.3,1e3);return a.position.z=450,a.position.x=-27,a.position.y=410,a},ThreeRenderer.prototype.CreateRenderer=function(){"use strict";var a=new THREE.WebGLRenderer({antialias:!0});return a.setClearColor(0),a.setSize(420,600),a.shadowMapEnabled=!0,a.shadowMapSoft=!0,a},ThreeRenderer.prototype.AddCube=function(a){"use strict";var b=new THREE.BoxGeometry(.7*CONFIG.pixelPerBox,.7*CONFIG.pixelPerBox,CONFIG.pixelPerBox/4),c=new THREE.MeshPhongMaterial({color:a,emissive:1118481}),d=new THREE.Mesh(b,c);return this.scene.add(d),d.id},ThreeRenderer.prototype.UpdateCube=function(a,b){"use strict";var c=this.scene.getObjectById(b.id);c.position.setY(b.verticalPosition+this.offset),c.position.setX(CalculateX(b,a)),c.material.color=new THREE.Color(b.GetHexColor()),b.state===Block.EState.Disappearing&&(c.material.opacity=Math.max(1-b.animationState/100,0),c.material.transparent=!0),0===c.material.opacity&&(this.scene.remove(c),b.id=-1)},ThreeRenderer.prototype.Render=function(){"use strict";this.light.position.setY(1e3+this.offset),this.renderer.render(this.scene,this.camera)},ThreeRenderer.prototype.LinkDom=function(a){"use strict";this.renderer.domElement.setAttribute("id",this.id);var b=$("#"+a+" .gamePlaceHolder");if(0===b.length)throw a+"missing gameplaceHolder";b.empty(),b.append($(this.renderer.domElement))},ThreeRenderer.prototype.UnlinkDom=function(){"use strict";var a=document.getElementById(this.id);null!==a&&a.parentNode.removeChild(a)},ThreeRenderer.prototype.CreateCursor=function(a){"use strict";var b=new THREE.Shape;return b.absarc(72,-13,10,-Math.PI/2,0,!0),b.lineTo(82,0),b.absarc(72,13,10,0,Math.PI/2,!0),b.lineTo(35,20),b.lineTo(35,0),b.absarc(-2,-13,10,3*Math.PI/2,Math.PI,!0),b.lineTo(-12,0),b.absarc(-2,13,10,Math.PI,Math.PI/2,!0),b.lineTo(35,-20),new THREE.PointCloud(b.createPointsGeometry(),new THREE.PointCloudMaterial({color:a,size:4}))},ThreeRenderer.prototype.DrawCursorOn=function(a,b,c){"use strict";void 0===c&&(c=0),this.cursor[c].position.set((a-CONFIG.columnCount/2)*CONFIG.pixelPerBox-10,b*(CONFIG.pixelPerBox-.5)+this.offset+5,7)},ThreeRenderer.prototype.Freeze=function(){"use strict";for(var a=0;a<this.cursor.length;a+=1)this.scene.remove(this.cursor[a]);this.Render()},ThreeRenderer.prototype.RenderTetris=function(a){"use strict";this.offset=a.groundPos;for(var b,c=0;c<CONFIG.columnCount;c+=1)for(var d=0;d<a.grid.container[c].length;d+=1)b=a.grid.container[c][d],b.type!==Block.EType.PlaceHolder&&(-1===b.id&&(b.id=this.AddCube(b.GetHexColor())),this.UpdateCube((c-CONFIG.columnCount/2)*CONFIG.pixelPerBox,b));for(c=0;c<a.cursor.length;c+=1)this.DrawCursorOn(a.cursor[c].x,a.cursor[c].y,c);this.Render()};