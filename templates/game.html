<div class="container" ng-if="!config.splitScreen">

    <div class="row">
        <div class="col-md-8 col-sm-12 noPadding" style="text-align:center">
            <div id="game" class="well gameHolder">
                <div class="pauseShadow" ng-cloak ng-if="pause.active" ng-click="pause.toggle()">Paused</div>
                <canvas mng-tetris-game="0" ></canvas>
            </div>
        </div>
        <div class="col-md-4 col-sm-12 ">
            <div class="gameDetails jumbotron" ng-controller="GameStateCtrl">
                <br />
                <div class="gameDetailsElement">
                    <h3>Score</h3>
                    <span id="score">{{state.score}} <b ng-if="state.combo > 1">(X{{state.combo}})</b></span>
                </div>
                <div class="gameDetailsElement">
                    <h3>Swaps</h3>
                    <span id="swaps">{{state.swaps}}</span>
                </div>
                <div class="gameDetailsElement">
                    <h3>APM</h3>
                    <span id="swaps">{{state.apm}}</span>
                </div>
                <div class="gameDetailsElement">
                    <h3>Time</h3>
                    <span id="time" class="timeBox">{{state.time | ticToTime}}</span>
                </div>
                <div class="gameDetailsElement">
                    <h3>Objectives</h3><br/>
                    <div id="rules">
                        <ul>
                            <li ng-repeat="rule in state.rules" class="defeatCond" ng-class="{successCond: rule.success}">{{rule.message}}</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div id="gameMenu"> <!--FIXME why does ng-click create a focus effect on buttons and not on div ? -->
                <div type="button" class="btn btn-danger" ng-click="reset()" style="width:80px">Retry</div>
                <div type="button" class="btn btn-success" ng-click="pause.toggle()" style="width:80px"><span
                        ng-if="!pause.active">Pause</span><span ng-if="pause.active">Play</span></div>
            </div>
        </div>
    </div>
</div>

<div class="container" ng-if="config.splitScreen">

    <div class="row">
        <div class="sideGame well col-lg-5 col-md-6">
            <canvas mng-tetris-game="0"></canvas>
        </div>

        <div class="sideGame well col-lg-5 col-lg-push-2  col-md-6">
            <canvas mng-tetris-game="1"></canvas>
        </div>
    </div>
</div>
<script type="x-shader/x-vertex" id="vertexshader">
			uniform float amplitude;
			attribute float size;
			attribute vec3 customColor;
			varying vec3 vColor;
			void main() {
				vColor = customColor;
				vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
				//gl_PointSize = size;
				gl_PointSize = size * ( 300.0 / length( mvPosition.xyz ) );
				gl_Position = projectionMatrix * mvPosition;
			}
</script>

<script type="x-shader/x-fragment" id="fragmentshader">
			uniform vec3 color;
			uniform sampler2D texture;
			varying vec3 vColor;
			void main() {
				gl_FragColor = vec4( color * vColor, 1.0 );
				gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );
			}
</script>
